!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("svelte/publish_old",t):(e=e||self).publish=t()}(this,(function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?n(Object(s),!0).forEach((function(n){t(e,n,s[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function o(e,t,n){return(o=a()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var s=new(Function.bind.apply(e,r));return n&&i(s,n.prototype),s}).apply(null,arguments)}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return o(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i(r,e)})(e)}function u(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function l(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(){}function h(e,t){for(var n in t)e[n]=t[n];return e}function d(e,t){for(var n in t)e[n]=1;return e}function f(e,t){e.appendChild(t)}function b(e,t,n){e.insertBefore(t,n)}function m(e){e.parentNode.removeChild(e)}function _(e){for(;e.nextSibling;)e.parentNode.removeChild(e.nextSibling)}function v(e,t){for(var n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(){return document.createDocumentFragment()}function y(e){return document.createElement(e)}function w(e){return document.createTextNode(e)}function N(e,t,n,r){e.addEventListener(t,n,r)}function k(e,t,n,r){e.removeEventListener(t,n,r)}function O(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function j(e,t){e.data=""+t}function T(e,t,n){e.style.setProperty(t,n)}function x(){return Object.create(null)}function E(t,n){return t!=t?n==n:t!==n||t&&"object"===e(t)||"function"==typeof t}function q(e,t){return e!=e?t==t:e!==t}function C(e,t){var n=e in this._handlers&&this._handlers[e].slice();if(n)for(var r=0;r<n.length;r+=1){var s=n[r];if(!s.__calling)try{s.__calling=!0,s.call(this,t)}finally{s.__calling=!1}}}function P(e){e._lock=!0,M(e._beforecreate),M(e._oncreate),M(e._aftercreate),e._lock=!1}function S(){return this._state}function z(e,t){e._handlers=x(),e._slots=x(),e._bind=t._bind,e._staged={},e.options=t,e.root=t.root||e,e.store=t.store||e.root.store,t.root||(e._beforecreate=[],e._oncreate=[],e._aftercreate=[])}function L(e,t){var n=this._handlers[e]||(this._handlers[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}}function M(e){for(;e&&e.length;)e.shift()()}var H={destroy:function(e){this.destroy=p,this.fire("destroy"),this.set=p,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:S,fire:C,on:L,set:function(e){this._set(h({},e)),this.root._lock||P(this.root)},_recompute:p,_set:function(e){var t=this._state,n={},r=!1;for(var s in e=h(this._staged,e),this._staged={},e)this._differs(e[s],t[s])&&(n[s]=r=!0);r&&(this._state=h(h({},t),e),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:t}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:t})))},_stage:function(e){h(this._staged,e)},_mount:function(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)},_differs:E};var U={show:function(){var e=this,t=setTimeout((function(){e.set({visible:!0})}),400);this.set({t:t})},hide:function(){var e=this.get().t;clearTimeout(e),this.set({visible:!1})}};function D(e,t){var n,r,s,i,a=e._slotted.default;return{c:function(){n=y("div"),r=y("i"),s=w("\n        "),r.className="hat-icon im im-graduation-hat svelte-19xfki7",n.className="content svelte-19xfki7"},m:function(e,t){b(e,n,t),f(n,r),f(n,s),a&&(f(n,i||(i=document.createComment(""))),f(n,a))},d:function(e){e&&m(n),a&&function(e,t){for(;e.nextSibling;)t.appendChild(e.nextSibling)}(i,a)}}}function G(e){z(this,e),this._state=h({visible:!1},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=function(e,t){var n,r,s,i=t.visible&&D(e);function a(t){e.show()}function o(t){e.hide()}return{c:function(){n=y("div"),(r=y("span")).textContent="?",s=w("\n    "),i&&i.c(),r.className="help-icon svelte-19xfki7",N(n,"mouseenter",a),N(n,"mouseleave",o),n.className="help svelte-19xfki7"},m:function(e,t){b(e,n,t),f(n,r),f(n,s),i&&i.m(n,null)},p:function(t,r){r.visible?i||((i=D(e)).c(),i.m(n,null)):i&&(i.d(1),i=null)},d:function(e){e&&m(n),i&&i.d(),k(n,"mouseenter",a),k(n,"mouseleave",o)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}h(G.prototype,H),h(G.prototype,U);var A={};function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"core";"chart"===e?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(A[e]=window.__dw.vis.meta.locale||{}):A[e]="core"===e?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[e])}function R(e){var t=arguments,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"core";if(e=e.trim(),A[n]||I(n),!A[n][e])return"MISSING:"+e;var r=A[n][e];return"string"==typeof r&&arguments.length>2&&(r=r.replace(/\$(\d)/g,(function(e,n){return n=2+Number(n),void 0===t[n]?e:t[n]}))),r}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r({payload:null,raw:!1,method:"GET",baseUrl:"//".concat(dw.backend.__api_domain),mode:"cors",credentials:"include"},t,{headers:r({"Content-Type":"application/json"},t.headers)}),s=n.payload,i=n.baseUrl,a=n.raw,o=u(n,["payload","baseUrl","raw"]),c="".concat(i.replace(/\/$/,""),"/").concat(e.replace(/^\//,""));return s&&(o.body=JSON.stringify(s)),window.fetch(c,o).then((function(e){if(a)return e;if(!e.ok)throw new B(e);if(204!==e.status){var t=e.headers.get("content-type").split(";")[0];return"application/json"===t?e.json():"image/png"===t||"application/pdf"===t?e.blob():e.text()}}))}F.get=$("GET"),F.patch=$("PATCH"),F.put=$("PUT"),F.post=$("POST"),F.head=$("HEAD");function $(e){return function(t,n){if(n&&n.method)throw new Error("Setting option.method is not allowed in httpReq.".concat(e.toLowerCase(),"()"));return F(t,r({},n,{method:e}))}}F.delete=$("DELETE");var B=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=l(this,s(t).call(this))).name="HttpReqError",n.status=e.status,n.statusText=e.statusText,n.message="[".concat(e.status,"] ").concat(e.statusText),n.response=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,e),t}(c(Error));function J(e,t,n,r){window._paq&&window._paq.push(["trackEvent",e,t,n,r])}function K(e,t,n,r,s){var i={method:t,body:r,mode:"cors",credentials:n};return window.fetch(e,i).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.text()})).then((function(e){try{return JSON.parse(e)}catch(t){return console.warn("malformed json input",e),e}})).then((function(e){return s&&s(e),e})).catch((function(e){if(!s)throw e;console.error(e)}))}var Q=[100,200,300,400,500,700,800,900,1e3];var V=0,W=!0;var X={publish:function(){var e=this;if(window.chart.save){var t,n,r,s,i,a=e.get().chart;e.set({publishing:!0,progress:0,publish_error:!1}),a.metadata.publish["embed-heights"]=(e.get().embed_templates,t={},n=window.$,r=n(n("#iframe-vis")[0].contentDocument),s=n("h1",r).height()+n(".chart-intro",r).height()+n(".dw-chart-notes",r).height(),i=n("#iframe-vis").height(),Q.forEach((function(e){r.find("h1,.chart-intro,.dw-chart-notes").css("width",e+"px");var a=n("h1",r).height()+n(".chart-intro",r).height()+n(".dw-chart-notes",r).height();t[e]=i+(a-s)})),r.find("h1,.chart-intro,.dw-chart-notes").css("width","auto"),t),e.set({chart:a}),J("Chart Editor","publish"),window.chart.attributes(a).save().then((function(t){F.post("/v3/charts/".concat(a.id,"/publish")).then((function(t){F.get("/v3/charts/".concat(a.id)).then((function(t){J("Chart Editor","publish-success"),e.publishFinished(t)}))})).catch((function(e){J("Chart Editor","publish-error",e.message)})),V=0,e.updateStatus()}))}else setTimeout((function(){e.publish()}),100)},updateProgressBar:function(e){this.refs.bar&&(this.refs.bar.style.width=(100*e).toFixed()+"%")},updateStatus:function(){var e=this,t=e.get().chart;V+=.05,function(e,t,n){2===arguments.length&&"function"==typeof t?(n=t,t="include"):1===arguments.length&&(t="include"),K(e,"GET",t,null,n)}("/api/charts/".concat(t.id,"/publish/status"),(function(t){t&&(t=+t/100+V,e.set({progress:Math.min(1,t)})),e.get().publishing&&setTimeout((function(){e.updateStatus()}),400)}))},publishFinished:function(e){var t=this;this.set({progress:1,published:!0,needs_republish:!1}),setTimeout((function(){return t.set({publishing:!1})}),500),this.set({chart:e}),window.parent.postMessage({source:"datawrapper",type:"chart-publish",chartId:e.id},"*"),window.chart.attributes(e)},copy:function(e){var t=this;t.refs.embedInput.select();try{document.execCommand("copy")&&(J("Chart Editor","embedcode-copy"),t.set({copy_success:!0}),setTimeout((function(){return t.set({copy_success:!1})}),300))}catch(e){}}};function Y(e){var t=e.changed,n=e.current,r=window.dw&&window.dw.backend&&window.dw.backend.setUserData;if(t.publishing&&n.publishing&&this.updateProgressBar(n.progress),t.progress&&this.updateProgressBar(n.progress),t.embed_type&&r){var s=window.dw.backend.__userData;if(!n.embed_type||!s)return;s.embed_type=n.embed_type,window.dw.backend.setUserData(s)}if(t.shareurl_type&&r){var i=window.dw.backend.__userData;if(!n.shareurl_type||!i)return;i.shareurl_type=n.shareurl_type,window.dw.backend.setUserData(i)}t.published&&window.document.querySelector(".dw-create-publish .publish-step").classList[n.published?"add":"remove"]("is-published"),t.auto_publish&&n.auto_publish&&W&&(this.publish(),W=!1,window.history.replaceState("","",window.location.pathname))}function Z(e,t,n){var r=Object.create(e);return r.tpl=t[n],r}function ee(e,t,n){var r=Object.create(e);return r.tpl=t[n],r}function te(e,t,n){var r=Object.create(e);return r.tpl=t[n],r}function ne(e,t){var n,r=R("publish / publish-intro");return{c:function(){T(n=y("p"),"margin-bottom","20px")},m:function(e,t){b(e,n,t),n.innerHTML=r},d:function(e){e&&m(n)}}}function re(e,t){var n,r=R("publish / republish-intro");return{c:function(){n=y("p")},m:function(e,t){b(e,n,t),n.innerHTML=r},d:function(e){e&&m(n)}}}function se(e,t){var n,r,s,i,a,o,c=R("publish / publish-btn");return{c:function(){n=y("span"),r=y("i"),i=w("\n        "),a=y("span"),o=w(c),r.className=s="fa fa-fw "+(t.publishing?"fa-refresh fa-spin":"fa-cloud-upload")+" svelte-q1cklz",a.className="title svelte-q1cklz",n.className="publish"},m:function(e,t){b(e,n,t),f(n,r),f(n,i),f(n,a),f(a,o)},p:function(e,t){e.publishing&&s!==(s="fa fa-fw "+(t.publishing?"fa-refresh fa-spin":"fa-cloud-upload")+" svelte-q1cklz")&&(r.className=s)},d:function(e){e&&m(n)}}}function ie(e,t){var n,r,s,i,a,o,c=R("publish / republish-btn");return{c:function(){n=y("span"),r=y("i"),i=w(" "),a=y("span"),o=w(c),r.className=s="fa fa-fw fa-refresh "+(t.publishing?"fa-spin":"")+" svelte-q1cklz",a.className="title svelte-q1cklz",n.className="re-publish"},m:function(e,t){b(e,n,t),f(n,r),f(n,i),f(n,a),f(a,o)},p:function(e,t){e.publishing&&s!==(s="fa fa-fw fa-refresh "+(t.publishing?"fa-spin":"")+" svelte-q1cklz")&&(r.className=s)},d:function(e){e&&m(n)}}}function ae(e,t){var n,r,s,i,a=R("publish / publish-btn-intro");return{c:function(){n=y("div"),(r=y("div")).innerHTML='<i class="fa fa-chevron-left"></i>',s=w("\n    "),i=y("div"),r.className="arrow svelte-q1cklz",i.className="text svelte-q1cklz",n.className="publish-intro svelte-q1cklz"},m:function(e,t){b(e,n,t),f(n,r),f(n,s),f(n,i),i.innerHTML=a},d:function(e){e&&m(n)}}}function oe(e,t){var n,r=R("publish / republish-alert");return{c:function(){(n=y("div")).className="btn-aside alert svelte-q1cklz"},m:function(e,t){b(e,n,t),n.innerHTML=r},d:function(e){e&&m(n)}}}function ce(e,t){var n,r=R("publish / publish-success");return{c:function(){(n=y("div")).className="alert alert-success"},m:function(e,t){b(e,n,t),n.innerHTML=r},d:function(e){e&&m(n)}}}function ue(e,t){var n;return{c:function(){(n=y("div")).className="alert alert-error"},m:function(e,r){b(e,n,r),n.innerHTML=t.publish_error},p:function(e,t){e.publish_error&&(n.innerHTML=t.publish_error)},d:function(e){e&&m(n)}}}function le(e,t){var n,r,s,i,a,o,c,u=R("publish / progress / please-wait");return{c:function(){n=y("div"),r=w(u),s=w("\n    "),i=y("div"),(a=y("div")).className=o="bar "+(t.progress<1?"":"bar-success")+" svelte-q1cklz",i.className="progress progress-striped active svelte-q1cklz",n.className=c="alert "+(t.progress<1?"alert-info":"alert-success")+" publishing svelte-q1cklz"},m:function(t,o){b(t,n,o),f(n,r),f(n,s),f(n,i),f(i,a),e.refs.bar=a},p:function(e,t){e.progress&&o!==(o="bar "+(t.progress<1?"":"bar-success")+" svelte-q1cklz")&&(a.className=o),e.progress&&c!==(c="alert "+(t.progress<1?"alert-info":"alert-success")+" publishing svelte-q1cklz")&&(n.className=c)},d:function(t){t&&m(n),e.refs.bar===a&&(e.refs.bar=null)}}}function pe(e,t){var n,r,s,i,a,o=t.tpl.name;function c(){e.set({shareurl_type:r.__value})}return{c:function(){n=y("label"),r=y("input"),i=w(" "),a=y("noscript"),e._bindingGroups[0].push(r),N(r,"change",c),r.__value=s=t.tpl.id,r.value=r.__value,O(r,"type","radio"),r.name="url-type",r.className="svelte-q1cklz",n.className="radio"},m:function(e,s){b(e,n,s),f(n,r),r.checked=r.__value===t.shareurl_type,f(n,i),f(n,a),a.insertAdjacentHTML("afterend",o)},p:function(e,t){e.shareurl_type&&(r.checked=r.__value===t.shareurl_type),e.plugin_shareurls&&s!==(s=t.tpl.id)&&(r.__value=s),r.value=r.__value,e.plugin_shareurls&&o!==(o=t.tpl.name)&&(_(a),a.insertAdjacentHTML("afterend",o))},d:function(t){t&&m(n),e._bindingGroups[0].splice(e._bindingGroups[0].indexOf(r),1),k(r,"change",c)}}}function he(e,t){var n,r,s,i,a,o=t.tpl.title;function c(){e.set({embed_type:r.__value})}return{c:function(){n=y("label"),r=y("input"),i=w(" "),a=y("noscript"),e._bindingGroups[1].push(r),N(r,"change",c),O(r,"type","radio"),r.__value=s=t.tpl.id,r.value=r.__value,r.className="svelte-q1cklz",n.className="radio"},m:function(e,s){b(e,n,s),f(n,r),r.checked=r.__value===t.embed_type,f(n,i),f(n,a),a.insertAdjacentHTML("afterend",o)},p:function(e,t){e.embed_type&&(r.checked=r.__value===t.embed_type),e.embed_templates&&s!==(s=t.tpl.id)&&(r.__value=s),r.value=r.__value,e.embed_templates&&o!==(o=t.tpl.title)&&(_(a),a.insertAdjacentHTML("afterend",o))},d:function(t){t&&m(n),e._bindingGroups[1].splice(e._bindingGroups[1].indexOf(r),1),k(r,"change",c)}}}function de(e,t){var n,r,s,i,a,o,c=t.tpl.title,u=t.tpl.text;return{c:function(){n=y("div"),r=y("b"),s=w(c),i=w(":"),a=w(" "),o=y("noscript")},m:function(e,t){b(e,n,t),f(n,r),f(r,s),f(r,i),f(n,a),f(n,o),o.insertAdjacentHTML("afterend",u)},p:function(e,t){e.embed_templates&&c!==(c=t.tpl.title)&&j(s,c),e.embed_templates&&u!==(u=t.tpl.text)&&(_(o),o.insertAdjacentHTML("afterend",u))},d:function(e){e&&m(n)}}}function fe(e){var t=this;z(this,e),this.refs={},this._state=h({chart:{id:""},embed_templates:[],plugin_shareurls:[],published:!1,publishing:!1,needs_republish:!1,publish_error:!1,auto_publish:!1,progress:0,shareurl_type:"default",embed_type:"responsive",copy_success:!1},e.data),this._recompute({shareurl_type:1,chart:1,plugin_shareurls:1,published:1,embed_type:1},this._state),this._bindingGroups=[[],[]],this._intro=!0,this._handlers.state=[Y],Y.call(this,{changed:d({},this._state),current:this._state}),this._fragment=function(e,t){var n,r,s,i,a,o,c,u,l,p,h,d,_,x,E,q,C,P,S,z,L,M,H,U,D,A,I,F,$,B,J,K,Q,V,W,X,Y,fe,be,me,_e,ve,ge,ye,we,Ne,ke,Oe,je,Te,xe,Ee,qe,Ce,Pe,Se,ze,Le=R("publish / share-embed"),Me=R("publish / share-url"),He=R("publish / share-url / fullscreen"),Ue=R("publish / help / share-url"),De=R("publish / embed"),Ge=R("publish / copy"),Ae=R("publish / copy-success"),Ie=R("publish / embed / help");function Re(e){return e.published?re:ne}var Fe=Re(t),$e=Fe(e,t);function Be(e){return e.published?ie:se}var Je=Be(t),Ke=Je(e,t);function Qe(t){e.publish()}var Ve=!t.published&&ae(),We=t.needs_republish&&!t.publishing&&oe(),Xe=t.published&&!t.needs_republish&&1===t.progress&&!t.publishing&&ce(),Ye=t.publish_error&&ue(e,t),Ze=t.publishing&&le(e,t);function et(){e.set({shareurl_type:M.__value})}for(var tt=t.plugin_shareurls,nt=[],rt=0;rt<tt.length;rt+=1)nt[rt]=pe(e,te(t,tt,rt));var st=new G({root:e.root,store:e.store,slots:{default:g()}}),it=t.embed_templates,at=[];for(rt=0;rt<it.length;rt+=1)at[rt]=he(e,ee(t,it,rt));function ot(n){e.copy(t.embedCode)}var ct=t.embed_templates.slice(2),ut=[];for(rt=0;rt<ct.length;rt+=1)ut[rt]=de(e,Z(t,ct,rt));var lt=new G({root:e.root,store:e.store,slots:{default:g()}});return{c:function(){$e.c(),n=w("\n\n"),r=y("button"),Ke.c(),i=w("\n\n"),Ve&&Ve.c(),a=w(" "),We&&We.c(),o=w(" "),Xe&&Xe.c(),c=w(" "),Ye&&Ye.c(),u=w(" "),Ze&&Ze.c(),l=w("\n\n"),p=y("div"),h=y("h2"),d=w("\n    "),_=y("div"),x=y("i"),E=w("\n        "),q=y("div"),C=y("div"),P=y("b"),S=w("\n                "),z=y("div"),L=y("label"),M=y("input"),H=w("\n                        "),U=y("noscript"),D=w("\n                    ");for(var f=0;f<nt.length;f+=1)nt[f].c();A=w("\n            "),I=y("div"),F=y("a"),$=w(t.shareUrl),B=w("\n        "),J=y("div"),st._fragment.c(),K=w("\n\n    "),Q=y("div"),V=y("i"),W=w("\n        "),X=y("div"),Y=y("div"),fe=y("b"),be=w("\n                "),me=y("div");for(f=0;f<at.length;f+=1)at[f].c();_e=w("\n            "),ve=y("div"),ge=y("textarea"),ye=w("\n                "),we=y("button"),Ne=y("i"),ke=w(" "),Oe=w(Ge),je=w("\n                "),Te=y("div"),xe=w(Ae),qe=w("\n        "),Ce=y("div"),Pe=y("noscript"),Se=w(" ");for(f=0;f<ut.length;f+=1)ut[f].c();lt._fragment.c(),N(r,"click",Qe),r.disabled=t.publishing,r.className=s="btn-publish btn btn-primary btn-large "+(t.published?"":"btn-first-publish")+" svelte-q1cklz",x.className="icon fa fa-link fa-fw",e._bindingGroups[0].push(M),N(M,"change",et),M.__value="default",M.value=M.__value,O(M,"type","radio"),M.name="url-type",M.className="svelte-q1cklz",L.className="radio",z.className="embed-options svelte-q1cklz",C.className="h",F.target="_blank",F.className="share-url svelte-q1cklz",F.href=t.shareUrl,I.className="inpt",q.className="ctrls",_.className="block",V.className="icon fa fa-code fa-fw",me.className="embed-options svelte-q1cklz",Y.className="h",O(ge,"type","text"),ge.className="input embed-code svelte-q1cklz",ge.readOnly=!0,ge.value=t.embedCode,Ne.className="fa fa-copy",N(we,"click",ot),we.className="btn btn-copy",we.title="copy",Te.className=Ee="copy-success "+(t.copy_success?"show":"")+" svelte-q1cklz",ve.className="inpt",X.className="ctrls",Q.className="block",T(p,"margin-top","20px"),p.className=ze=t.published?"":"inactive"},m:function(s,m){$e.m(s,m),b(s,n,m),b(s,r,m),Ke.m(r,null),b(s,i,m),Ve&&Ve.m(s,m),b(s,a,m),We&&We.m(s,m),b(s,o,m),Xe&&Xe.m(s,m),b(s,c,m),Ye&&Ye.m(s,m),b(s,u,m),Ze&&Ze.m(s,m),b(s,l,m),b(s,p,m),f(p,h),h.innerHTML=Le,f(p,d),f(p,_),f(_,x),f(_,E),f(_,q),f(q,C),f(C,P),P.innerHTML=Me,f(C,S),f(C,z),f(z,L),f(L,M),M.checked=M.__value===t.shareurl_type,f(L,H),f(L,U),U.insertAdjacentHTML("afterend",He),f(z,D);for(var v=0;v<nt.length;v+=1)nt[v].m(z,null);f(q,A),f(q,I),f(I,F),f(F,$),f(_,B),f(st._slotted.default,J),J.innerHTML=Ue,st._mount(_,null),f(p,K),f(p,Q),f(Q,V),f(Q,W),f(Q,X),f(X,Y),f(Y,fe),fe.innerHTML=De,f(Y,be),f(Y,me);for(v=0;v<at.length;v+=1)at[v].m(me,null);f(X,_e),f(X,ve),f(ve,ge),e.refs.embedInput=ge,f(ve,ye),f(ve,we),f(we,Ne),f(we,ke),f(we,Oe),f(ve,je),f(ve,Te),f(Te,xe),f(Q,qe),f(lt._slotted.default,Ce),f(Ce,Pe),Pe.insertAdjacentHTML("beforebegin",Ie),f(Ce,Se);for(v=0;v<ut.length;v+=1)ut[v].m(Ce,null);lt._mount(Q,null)},p:function(i,h){if(Fe!==(Fe=Re(t=h))&&($e.d(1),($e=Fe(e,t)).c(),$e.m(n.parentNode,n)),Je===(Je=Be(t))&&Ke?Ke.p(i,t):(Ke.d(1),(Ke=Je(e,t)).c(),Ke.m(r,null)),i.publishing&&(r.disabled=t.publishing),i.published&&s!==(s="btn-publish btn btn-primary btn-large "+(t.published?"":"btn-first-publish")+" svelte-q1cklz")&&(r.className=s),t.published?Ve&&(Ve.d(1),Ve=null):Ve||((Ve=ae()).c(),Ve.m(a.parentNode,a)),t.needs_republish&&!t.publishing?We||((We=oe()).c(),We.m(o.parentNode,o)):We&&(We.d(1),We=null),!t.published||t.needs_republish||1!==t.progress||t.publishing?Xe&&(Xe.d(1),Xe=null):Xe||((Xe=ce()).c(),Xe.m(c.parentNode,c)),t.publish_error?Ye?Ye.p(i,t):((Ye=ue(e,t)).c(),Ye.m(u.parentNode,u)):Ye&&(Ye.d(1),Ye=null),t.publishing?Ze?Ze.p(i,t):((Ze=le(e,t)).c(),Ze.m(l.parentNode,l)):Ze&&(Ze.d(1),Ze=null),i.shareurl_type&&(M.checked=M.__value===t.shareurl_type),i.plugin_shareurls||i.shareurl_type){tt=t.plugin_shareurls;for(var d=0;d<tt.length;d+=1){var f=te(t,tt,d);nt[d]?nt[d].p(i,f):(nt[d]=pe(e,f),nt[d].c(),nt[d].m(z,null))}for(;d<nt.length;d+=1)nt[d].d(1);nt.length=tt.length}if(i.shareUrl&&(j($,t.shareUrl),F.href=t.shareUrl),i.embed_templates||i.embed_type){it=t.embed_templates;for(d=0;d<it.length;d+=1){var b=ee(t,it,d);at[d]?at[d].p(i,b):(at[d]=he(e,b),at[d].c(),at[d].m(me,null))}for(;d<at.length;d+=1)at[d].d(1);at.length=it.length}if(i.embedCode&&(ge.value=t.embedCode),i.copy_success&&Ee!==(Ee="copy-success "+(t.copy_success?"show":"")+" svelte-q1cklz")&&(Te.className=Ee),i.embed_templates){ct=t.embed_templates.slice(2);for(d=0;d<ct.length;d+=1){var m=Z(t,ct,d);ut[d]?ut[d].p(i,m):(ut[d]=de(e,m),ut[d].c(),ut[d].m(Ce,null))}for(;d<ut.length;d+=1)ut[d].d(1);ut.length=ct.length}i.published&&ze!==(ze=t.published?"":"inactive")&&(p.className=ze)},d:function(t){$e.d(t),t&&(m(n),m(r)),Ke.d(),k(r,"click",Qe),t&&m(i),Ve&&Ve.d(t),t&&m(a),We&&We.d(t),t&&m(o),Xe&&Xe.d(t),t&&m(c),Ye&&Ye.d(t),t&&m(u),Ze&&Ze.d(t),t&&(m(l),m(p)),e._bindingGroups[0].splice(e._bindingGroups[0].indexOf(M),1),k(M,"change",et),v(nt,t),st.destroy(),v(at,t),e.refs.embedInput===ge&&(e.refs.embedInput=null),k(we,"click",ot),v(ut,t),lt.destroy()}}}(this,this._state),this.root._oncreate.push((function(){t.fire("update",{changed:d({},t._state),current:t._state})})),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),P(this))}function be(e,t){this._handlers={},this._dependents=[],this._computed=x(),this._sortedComputedProperties=[],this._state=h({},e),this._differs=t&&t.immutable?q:E}h(fe.prototype,H),h(fe.prototype,X),fe.prototype._recompute=function(e,t){var n,r,s;(e.shareurl_type||e.chart||e.plugin_shareurls||e.published)&&this._differs(t.shareUrl,t.shareUrl=function(e){var t=e.shareurl_type,n=e.chart,r=e.plugin_shareurls;if(!e.published)return"https://www.datawrapper.de/...";if("default"===t)return n.publicUrl;var s="";return r.forEach((function(e){e.id===t&&(s=(s=e.url.replace(/%chart_id%/g,n.id)).replace(/%(.*?)%/g,(function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return e;for(var r=t.split("."),s=e,i=0;i<r.length&&null!=s;i++)s=s[r[i]];return null==s?n:s}({id:n.id,metadata:n.metadata},t)})))})),s}(t))&&(e.shareUrl=!0),(e.embed_type||e.chart)&&this._differs(t.embedCode,t.embedCode=(r=(n=t).embed_type,(s=n.chart).metadata?s.metadata.publish&&!s.metadata.publish["embed-codes"]?'<iframe src="'.concat(s.publicUrl,'" width="100%" height="').concat(s.metadata.publish["embed-height"],'" scrolling="no" frameborder="0" allowtransparency="true"></iframe>'):s.metadata.publish["embed-codes"]["embed-method-"+r]?s.metadata.publish["embed-codes"]["embed-method-"+r]:"":""))&&(e.embedCode=!0)},h(be.prototype,{_add:function(e,t){this._dependents.push({component:e,props:t})},_init:function(e){for(var t={},n=0;n<e.length;n+=1){var r=e[n];t["$"+r]=this._state[r]}return t},_remove:function(e){for(var t=this._dependents.length;t--;)if(this._dependents[t].component===e)return void this._dependents.splice(t,1)},_set:function(e,t){var n=this,r=this._state;this._state=h(h({},r),e);for(var s=0;s<this._sortedComputedProperties.length;s+=1)this._sortedComputedProperties[s].update(this._state,t);this.fire("state",{changed:t,previous:r,current:this._state}),this._dependents.filter((function(e){for(var r={},s=!1,i=0;i<e.props.length;i+=1){var a=e.props[i];a in t&&(r["$"+a]=n._state[a],s=!0)}if(s)return e.component._stage(r),!0})).forEach((function(e){e.component.set({})})),this.fire("update",{changed:t,previous:r,current:this._state})},_sortComputedProperties:function(){var e,t=this._computed,n=this._sortedComputedProperties=[],r=x();function s(i){var a=t[i];a&&(a.deps.forEach((function(t){if(t===e)throw new Error("Cyclical dependency detected between ".concat(t," <-> ").concat(i));s(t)})),r[i]||(r[i]=!0,n.push(a)))}for(var i in this._computed)s(e=i)},compute:function(e,t,n){var r,s=this,i={deps:t,update:function(i,a,o){var c=t.map((function(e){return e in a&&(o=!0),i[e]}));if(o){var u=n.apply(null,c);s._differs(u,r)&&(r=u,a[e]=!0,i[e]=r)}}};this._computed[e]=i,this._sortComputedProperties();var a=h({},this._state),o={};i.update(a,o,!0),this._set(a,o)},fire:C,get:S,on:L,set:function(e){var t=this._state,n=this._changed={},r=!1;for(var s in e){if(this._computed[s])throw new Error("'".concat(s,"' is a read-only computed property"));this._differs(e[s],t[s])&&(n[s]=r=!0)}r&&this._set(e,n)}});return{App:fe,data:{chart:{id:""},embed_templates:[],plugin_shareurls:[],published:!1,publishing:!1,needs_republish:!1,publish_error:!1,auto_publish:!1,progress:0,shareurl_type:"default",embed_type:"responsive",copy_success:!1},store:new be({})}}));
